import{B as t,a as e,b as a,c as s,d as r,e as n,f as o,g as i,h as l,i as c,j as u,k as d,V as p,l as h}from"./vendor.75ed6038.js";!function(t=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(a){const s=new URL(t,location),r=t=>{URL.revokeObjectURL(t.src),t.remove()};self[e]=t=>new Promise(((a,n)=>{const o=new URL(t,s);if(self[e].moduleMap[o])return a(self[e].moduleMap[o]);const i=new Blob([`import * as m from '${o}';`,`${e}.moduleMap['${o}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){n(new Error(`Failed to import: ${t}`)),r(l)},onload(){a(self[e].moduleMap[o]),r(l)}});document.head.appendChild(l)})),self[e].moduleMap={}}}("/assets/");function m(t,e,a,s,r,n,o,i){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),s&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):r&&(l=i?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}const g={};var f=m({name:"Wrapper",components:{BContainer:t,BRow:e,BCol:a}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:"md"}},[a("b-row",{staticClass:"justify-content-center align-items-center"},[a("b-col",{attrs:{cols:"12",sm:"10",md:"8",lg:"6",xl:"5"}},[t._t("default")],2)],1)],1)}),[],!1,(function(t){for(let e in g)this[e]=g[e]}),null,null,null);f.options.__file="src/ui/Wrapper.vue";var y=f.exports;const v="https://api.openweathermap.org/data/2.5/weather",_="&appid=af70a8ed8f9ec89b897089b1e7ad7ee9&units=metric",w=async t=>{const e=await fetch(t);if(200!==e.status)throw new Error("We couldn't get the weather data for that location");return await e.json()},b=async(t,e,a)=>await w(`${v}?lat=${t}&lon=${e}${_}&lang=${a.lang}`),$=async(t,e)=>await w(`${v}?q=${t}${_}&lang=${e.lang}`);class C{constructor(t,e,a,s,r){this.temp=t,this.description=e,this.feelsLike=a,this.humidity=s,this.pressure=r}}const L={debug:!1,state:{weatherData:new C,city:"",lat:0,lon:0,isLoading:!0,isError:!1,errorMessage:""},setWeatherData(t){this.debug&&console.log("setWeatherDataAction triggered with",t),this.state.weatherData=t},setCity(t){this.debug&&console.log("setCity triggered with",t),this.state.city=t},setLat(t){this.debug&&console.log("setLat triggered with",t),this.state.lat=t},setLon(t){this.debug&&console.log("setLon triggered with",t),this.state.lon=t},setIsLoading(t){this.debug&&console.log("setIsLoading triggered with",t),this.state.isLoading=t},setIsError(t){this.debug&&console.log("setIsError triggered with",t),this.state.isError=t},setErrorMessage(t){this.debug&&console.log("setErrorMessage triggered with",t),this.state.errorMessage=t}};Object.freeze(L);const x={makeKey:t=>`_wa_${t}`,saveToCache(t,e){try{sessionStorage.setItem(this.makeKey(t),JSON.stringify(e))}catch(a){console.warn(a)}},getFromCache(t){try{const e=sessionStorage.getItem(this.makeKey(t));return!!e&&JSON.parse(e)}catch(e){return console.warn(e),!1}}};Object.freeze(x);const E=t=>new C(t.main.temp,t.weather[0].description,t.main.feels_like,t.main.humidity,t.main.pressure),F=(t,e)=>{e.setIsError(!0),e.setErrorMessage(t.message)},S=t=>{t.setIsLoading(!0),t.setErrorMessage(""),t.setIsError(!1)},D=(t,e,a)=>{a.setWeatherData(t),a.setLat(0),a.setLon(0),a.setCity(e)};const B={};var k=m({name:"QueryForm",components:{Wrapper:y,BForm:s,BFormInput:r,BFormGroup:n,BButton:o},data:()=>({city:"",appState:L.state}),computed:{valid:function(){return this.city}},mounted(){this.mountHandler()},methods:{submitHandler:async function(){S(L);try{const t=`${this.city}${this.$i18n.locale}`;let e=x.getFromCache(t);if(!e){const a=await $(this.city,{lang:this.$i18n.locale});e=E(a),x.saveToCache(t,e)}D(e,this.city,L)}catch(t){F(t,L)}finally{L.setIsLoading(!1)}},mountHandler:async function(){const t={lat:parseFloat((180*Math.random()-90).toFixed(8)),lon:parseFloat((360*Math.random()-180).toFixed(8))};try{const e=await b(t.lat,t.lon,{lang:this.$i18n.locale});((t,e,a)=>{a.setWeatherData(t),a.setLat(e.lat),a.setLon(e.lon)})(E(e),t,L)}catch(e){F(e,L)}finally{L.setIsLoading(!1)}}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("article",{staticClass:"bg-light py-3 shadow-lg"},[a("wrapper",[a("b-form",{on:{submit:function(e){return e.preventDefault(),t.submitHandler.apply(null,arguments)}}},[a("b-form-group",{attrs:{label:t.$t("messages.cityLabel"),"label-for":"input-city"}},[a("b-form-input",{attrs:{id:"input-city",name:"city",placeholder:t.$t("messages.cityPlaceholder"),required:""},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}})],1),a("b-form-group",[a("b-button",{attrs:{type:"submit",variant:"primary",disabled:!t.valid||t.appState.isLoading}},[t._v(" "+t._s(t.$t("messages.submit"))+" ")])],1)],1)],1)],1)}),[],!1,(function(t){for(let e in B)this[e]=B[e]}),null,null,null);k.options.__file="src/domain/query/QueryForm.vue";var j=k.exports;const M={name:"TextRow",props:{bold:{type:Boolean,default:!1},muted:{type:Boolean,default:!1},noBottomMargin:{type:Boolean,default:!1}}},I={};var T=m(M,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("p",{class:{"font-weight-bold":t.bold,"text-muted":t.muted,"mb-0":t.noBottomMargin}},[t._t("default")],2)}),[],!1,(function(t){for(let e in I)this[e]=I[e]}),null,null,null);T.options.__file="src/ui/TextRow.vue";var R=T.exports;const W={};var N=m({name:"Divider"},(function(){var t=this.$createElement;return(this._self._c||t)("hr",{staticClass:"border-top my-2"})}),[],!1,(function(t){for(let e in W)this[e]=W[e]}),null,null,null);N.options.__file="src/ui/Divider.vue";var O=N.exports;const U={};var z=m({name:"FormattedTemperature",props:{temp:{type:Number,required:!0}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",{staticClass:"text-nowrap"},[t._v(" "+t._s(Math.floor(t.temp))+"°C ")])}),[],!1,(function(t){for(let e in U)this[e]=U[e]}),null,null,null);z.options.__file="src/domain/display/FormattedTemperature.vue";var H=z.exports;const P={};var q=m({name:"Display",components:{BCard:i,TextRow:R,Divider:O,BBadge:l,FormattedTemperature:H},props:{weatherData:{type:C,required:!0},lat:{type:Number,default:0},lon:{type:Number,default:0},city:{type:String,default:""}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",{staticClass:"shadow",attrs:{tag:"article"}},[a("text-row",{attrs:{bold:!0}},[t.city?[t._v(" "+t._s(t.$t("messages.weatherForCity",{city:t.city}))+" ")]:[t._v(" "+t._s(t.$t("messages.weatherForCoordinates",{lat:t.lat,lon:t.lon}))+" ")]],2),a("div",{staticClass:"d-flex flex-nowrap justify-content-between"},[a("h1",{staticClass:"h2"},[a("formatted-temperature",{attrs:{temp:t.weatherData.temp}})],1),a("div",[a("b-badge",{attrs:{variant:"info"}},[t._v(" "+t._s(t.weatherData.description)+" ")])],1)]),a("text-row",[t._v(" "+t._s(t.$t("messages.feelsLike"))+" "),a("formatted-temperature",{attrs:{temp:t.weatherData.feelsLike}})],1),a("divider"),a("text-row",{attrs:{muted:!0}},[t._v(" "+t._s(t.$t("messages.humidity"))+": "+t._s(t.weatherData.humidity)+"% ")]),a("text-row",{attrs:{muted:!0,"no-bottom-margin":!0}},[t._v(" "+t._s(t.$t("messages.pressure"))+": "+t._s(t.weatherData.pressure)+"hPa ")])],1)}),[],!1,(function(t){for(let e in P)this[e]=P[e]}),null,null,null);q.options.__file="src/domain/display/Display.vue";var A=q.exports;const G=Object.freeze({EN:"en",DE:"de",BG:"bg",HU:"hu"});const K={};var V=m({name:"LanguageChanger",components:{BFormSelect:c},data:()=>({languages:[{text:"English",value:G.EN},{text:"Deutsch",value:G.DE},{text:"Magyar",value:G.HU},{text:"български",value:G.BG}]}),methods:{async changeHandler(t){S(L);try{if(L.state.lat&&L.state.lon){const e=await b(L.state.lat,L.state.lon,{lang:t});L.setWeatherData(E(e))}else{const e=`${L.state.city}${t}`;let a=x.getFromCache(e);if(!a){const s=await $(L.state.city,{lang:t});a=E(s),x.saveToCache(e,a)}D(a,L.state.city,L)}}catch(e){F(e,L)}finally{L.setIsLoading(!1)}}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-changer position-absolute"},[a("b-form-select",{attrs:{options:t.languages},on:{change:t.changeHandler},model:{value:t.$i18n.locale,callback:function(e){t.$set(t.$i18n,"locale",e)},expression:"$i18n.locale"}})],1)}),[],!1,(function(t){for(let e in K)this[e]=K[e]}),"6a2260b6",null,null);V.options.__file="src/infrastructure/i18n/LanguageChanger.vue";var Q=V.exports;const J={};var X=m({name:"App",components:{QueryForm:j,Display:A,BSpinner:u,BAlert:d,Wrapper:y,LanguageChanger:Q},data:()=>({appState:L.state})},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"sticky-footer-container"},[a("section",{staticClass:"sticky-footer-content d-flex flex-column justify-content-center position-relative"},[a("language-changer"),a("wrapper",[!t.appState.weatherData.temp||t.appState.isLoading||t.appState.isError?t.appState.isLoading?[a("div",{staticClass:"text-center"},[a("b-spinner",{attrs:{title:t.$t("messages.loading"),variant:"primary",label:t.$t("messages.loading")}})],1)]:t.appState.isError?[a("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(" "+t._s(t.appState.errorMessage)+" ")])]:t._e():[a("display",{attrs:{"weather-data":t.appState.weatherData,city:t.appState.city,lat:t.appState.lat,lon:t.appState.lon}})]],2)],1),a("section",{staticClass:"sticky-footer-footer"},[a("query-form")],1)])}),[],!1,(function(t){for(let e in J)this[e]=J[e]}),null,null,null);X.options.__file="src/application/App.vue";var Y=X.exports;p.use(h);const Z={en:{messages:{weatherForCity:"The weather for {city} is:",weatherForCoordinates:"The weather for a random coordinate (latitude: {lat}, longitude: {lon}) is:",feelsLike:"feels like",humidity:"Humidity",pressure:"Pressure",cityLabel:"City:",cityPlaceholder:"Type your city",submit:"Check the weather!",loading:"Loading..."}},de:{messages:{weatherForCity:"Das Wetter für {city} ist:",weatherForCoordinates:"Das Wetter für eine zufällige Koordinate (Breite: {lat}, Längengrad: {lon}) ist:",feelsLike:"fühlt sich an wie",humidity:"Feuchtigkeit",pressure:"Luftdruck",cityLabel:"Stadt:",cityPlaceholder:"Geben Sie Ihre Stadt ein",submit:"Wetter anschauen!",loading:"Wird geladen..."}},hu:{messages:{weatherForCity:"Aktuális időjárás, {city}:",weatherForCoordinates:"Időjárás egy véletlenszerű ponton (szélesség: {lat}, hosszúság: {lon}):",feelsLike:"érzésre",humidity:"Páratartalom",pressure:"Nyomás",cityLabel:"Város:",cityPlaceholder:"Írj be egy várost",submit:"Lássuk az időjárást!",loading:"Betöltés..."}},bg:{messages:{weatherForCity:"Времето за {city} е:",weatherForCoordinates:"Времето за произволна координата (географска ширина: {lat}, дължина: {lon}) е:",feelsLike:"се чувства като",humidity:"Влажност",pressure:"Налягане",cityLabel:"Град:",cityPlaceholder:"Въведете вашия град",submit:"Проверете времето!",loading:"Зареждане..."}}};new p({i18n:new h({locale:G.EN,messages:Z}),render:t=>t(Y)}).$mount("#app");
