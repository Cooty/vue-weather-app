import{B as e,a as t,b as a,c as s,d as r,e as n,f as o,g as i,h as l,i as c,j as u,k as d,l as p,m as h,n as m,V as f,o as g}from"./vendor.56e3e040.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const s=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,n)=>{const o=new URL(e,s);if(self[t].moduleMap[o])return a(self[t].moduleMap[o]);const i=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){n(new Error(`Failed to import: ${e}`)),r(l)},onload(){a(self[t].moduleMap[o]),r(l)}});document.head.appendChild(l)})),self[t].moduleMap={}}}("https://cooty.github.io/vue-weather-app/assets/");class y{constructor(e,t){this.lat=e,this.lon=t}}const _={debug:!1,state:{weatherData:null,city:"",coords:null,isLoading:!0,isError:!1,errorMessage:"",isRightSectionOpened:!1},setWeatherData(e){this.debug&&console.log("setWeatherDataAction triggered with",e),this.state.weatherData=e},setCity(e){this.debug&&console.log("setCity triggered with",e),this.state.city=e},setCoords(e){this.debug&&console.log("setCoords triggered with",e),this.state.coords=e},setIsLoading(e){this.debug&&console.log("setIsLoading triggered with",e),this.state.isLoading=e},setIsError(e){this.debug&&console.log("setIsError triggered with",e),this.state.isError=e},setErrorMessage(e){this.debug&&console.log("setErrorMessage triggered with",e),this.state.errorMessage=e},setIsRightSectionOpened(e){this.debug&&console.log("setIsRightSectionOpened triggered with",e),this.state.isRightSectionOpened=e}};Object.freeze(_);function b(e,t,a,s,r,n,o,i){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),s&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):r&&(l=i?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}const v={};var w=b({name:"QueryForm",components:{BForm:e,BFormInput:t,BIconSearch:a,BButton:s},data:()=>({city:"",appState:_.state}),computed:{valid(){return this.city}},mounted(){const e=new y(parseFloat((180*Math.random()-90).toFixed(8)),parseFloat((360*Math.random()-180).toFixed(8)));this.$bubble("update-weather",{lat:e.lat,lon:e.lon,lang:this.$i18n.locale})},methods:{submitHandler(){this.$bubble("update-weather",{q:this.city,lang:this.$i18n.locale})}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-form",{attrs:{inline:""},on:{submit:function(t){return t.preventDefault(),e.submitHandler.apply(null,arguments)}}},[a("label",{staticClass:"sr-only",attrs:{for:"input-city"}},[e._v(" "+e._s(e.$t("messages.cityLabel"))+" ")]),a("b-form-input",{staticClass:"query-form-city",attrs:{id:"input-city",name:"city",placeholder:e.$t("messages.cityPlaceholder"),required:""},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}}),a("b-button",{staticClass:"query-form-submit",attrs:{type:"submit",variant:"primary",disabled:!e.valid||e.appState.isLoading,"aria-label":e.$t("messages.submit")}},[a("b-icon-search")],1)],1)}),[],!1,(function(e){for(let t in v)this[t]=v[t]}),"13ec8040",null,null);w.options.__file="src/domain/query/QueryForm.vue";var C=w.exports;const $={name:"TextRow",props:{bold:{type:Boolean,default:!1},muted:{type:Boolean,default:!1},noBottomMargin:{type:Boolean,default:!1}}},x={};var S=b($,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("p",{class:{"font-weight-bold":e.bold,"text-muted":e.muted,"mb-0":e.noBottomMargin}},[e._t("default")],2)}),[],!1,(function(e){for(let t in x)this[t]=x[t]}),null,null,null);S.options.__file="src/ui/TextRow.vue";var E=S.exports;const L={};var B=b({name:"Divider"},(function(){var e=this.$createElement;return(this._self._c||e)("hr",{staticClass:"border-top my-2"})}),[],!1,(function(e){for(let t in L)this[t]=L[t]}),null,null,null);B.options.__file="src/ui/Divider.vue";var k=B.exports;const F={};var D=b({name:"FormattedTemperature",props:{temp:{type:Number,required:!0}}},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{staticClass:"text-nowrap"},[e._v(" "+e._s(Math.floor(e.temp))+"°C ")])}),[],!1,(function(e){for(let t in F)this[t]=F[t]}),null,null,null);D.options.__file="src/domain/display/FormattedTemperature.vue";var R=D.exports;class j{constructor(e,t,a,s,r){this.temp=e,this.description=t,this.feelsLike=a,this.humidity=s,this.pressure=r}}const I={};var M=b({name:"Display",components:{BCard:r,TextRow:E,Divider:k,BBadge:n,FormattedTemperature:R},props:{weatherData:{type:j,default:null},coords:{type:y,default:null},city:{type:String,default:""}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-card",{staticClass:"shadow",attrs:{tag:"article"}},[a("text-row",{attrs:{bold:!0}},[e.city?[e._v(" "+e._s(e.$t("messages.weatherForCity",{city:e.city}))+" ")]:[e._v(" "+e._s(e.$t("messages.weatherForCoordinates",{lat:e.coords.lat,lon:e.coords.lon}))+" ")]],2),a("div",{staticClass:"d-flex flex-nowrap justify-content-between"},[a("h1",{staticClass:"h2"},[a("formatted-temperature",{attrs:{temp:e.weatherData.temp}})],1),a("div",[a("b-badge",{attrs:{variant:"info"}},[e._v(" "+e._s(e.weatherData.description)+" ")])],1)]),a("text-row",[e._v(" "+e._s(e.$t("messages.feelsLike"))+" "),a("formatted-temperature",{attrs:{temp:e.weatherData.feelsLike}})],1),a("divider"),a("text-row",{attrs:{muted:!0}},[e._v(" "+e._s(e.$t("messages.humidity"))+": "+e._s(e.weatherData.humidity)+"% ")]),a("text-row",{attrs:{muted:!0,"no-bottom-margin":!0}},[e._v(" "+e._s(e.$t("messages.pressure"))+": "+e._s(e.weatherData.pressure)+"hPa ")])],1)}),[],!1,(function(e){for(let t in I)this[t]=I[t]}),null,null,null);M.options.__file="src/domain/display/Display.vue";var O=M.exports;const W={};var A=b({name:"Wrapper",components:{BContainer:o,BRow:i,BCol:l}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{attrs:{fluid:"md"}},[a("b-row",{staticClass:"justify-content-center align-items-center"},[a("b-col",{attrs:{cols:"12",sm:"10",md:"8",lg:"6",xl:"5"}},[e._t("default")],2)],1)],1)}),[],!1,(function(e){for(let t in W)this[t]=W[t]}),null,null,null);A.options.__file="src/ui/Wrapper.vue";var T=A.exports;const U={};var H=b({name:"AppMain"},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("main",{staticClass:"position-relative d-flex flex-column h-100"},[e._t("default")],2)}),[],!1,(function(e){for(let t in U)this[t]=U[t]}),null,null,null);H.options.__file="src/ui/AppMain.vue";var P=H.exports;const q={};var z=b({name:"AppHeader",components:{BNavbar:c,BContainer:o,BRow:i,BCol:l,BIconGear:u,BIconX:d},data:()=>({appState:_.state}),methods:{toggle(){_.setIsRightSectionOpened(!this.appState.isRightSectionOpened)}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-navbar",{staticClass:"shadow-sm",attrs:{sticky:!0,type:"light",variant:"light"}},[a("b-container",{attrs:{fluid:"lg"}},[a("b-row",{staticClass:"w-100 no-gutters",attrs:{"align-h":"between"}},[a("b-col",{attrs:{cols:10,sm:9,md:8,lg:6}},[e._t("left")],2),a("b-col",{staticClass:"d-flex justify-content-end position-relative",attrs:{cols:2,sm:3,md:4,lg:6}},[a("button",{staticClass:"right-slot-toggler-lt-md d-md-none h4 mb-0 text-secondary",on:{click:e.toggle}},[e.appState.isRightSectionOpened?[a("b-icon-x")]:[a("b-icon-gear")]],2),a("div",{staticClass:"right-slot p-2 p-md-0 rounded d-md-flex",class:{opened:e.appState.isRightSectionOpened}},[e._t("right")],2)])],1)],1)],1)}),[],!1,(function(e){for(let t in q)this[t]=q[t]}),"6b285008",null,null);z.options.__file="src/ui/AppHeader.vue";var N=z.exports;const G={};var K=b({name:"AppContent"},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("section",{staticClass:"app-content d-flex flex-column justify-content-center"},[e._t("default")],2)}),[],!1,(function(e){for(let t in G)this[t]=G[t]}),"70f25bb9",null,null);K.options.__file="src/ui/AppContent.vue";var V=K.exports;const Q=Object.freeze({EN:"en",DE:"de",BG:"bg",HU:"hu"});const X={};var J=b({name:"LanguageChanger",components:{BFormSelect:p},data:()=>({languages:[{text:"English",value:Q.EN},{text:"Deutsch",value:Q.DE},{text:"Magyar",value:Q.HU},{text:"български",value:Q.BG}]}),methods:{changeHandler(e){const t={};_.state.coords?(t.lat=_.state.coords.lat,t.lon=_.state.coords.lon):t.q=_.state.city,t.lang=e,this.$bubble("update-weather",t)}}},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("b-form-select",{attrs:{options:e.languages},on:{change:e.changeHandler},model:{value:e.$i18n.locale,callback:function(t){e.$set(e.$i18n,"locale",t)},expression:"$i18n.locale"}})}),[],!1,(function(e){for(let t in X)this[t]=X[t]}),null,null,null);J.options.__file="src/infrastructure/i18n/LanguageChanger.vue";var Y=J.exports;const Z=e=>new URLSearchParams(e).toString(),ee=async e=>await(async e=>{const t=await fetch(e);if(200!==t.status)throw new Error("messages.error");return await t.json()})(`\n        https://api.openweathermap.org/data/2.5/weather?${Z(e)}&appid=af70a8ed8f9ec89b897089b1e7ad7ee9&units=metric`),te={makeKey:e=>`_wa_${e}`,saveToCache(e,t){try{sessionStorage.setItem(this.makeKey(e),JSON.stringify(t))}catch(a){console.warn(a)}},getFromCache(e){try{const t=sessionStorage.getItem(this.makeKey(e));return!!t&&JSON.parse(t)}catch(t){return console.warn(t),!1}}};Object.freeze(te);const ae={};var se=b({name:"App",components:{QueryForm:C,Display:O,BSpinner:h,BAlert:m,Wrapper:T,LanguageChanger:Y,AppHeader:N,AppMain:P,AppContent:V},data:()=>({appState:_.state}),methods:{onUpdateWeatherHandler:async e=>{var t;(t=_).setIsLoading(!0),t.setErrorMessage(""),t.setIsError(!1),t.setIsRightSectionOpened(!1);try{let t;const a=Z(e),s=te.getFromCache(a);if(s)t=s;else{t=(e=>{const{main:t,weather:a}=e;if(!(t&&a&&a[0]&&a[0].description&&t.feels_like&&t.humidity&&t.pressure))throw new Error("Can't find all the necessary data in the API response");return new j(t.temp,a[0].description,t.feels_like,t.humidity,t.pressure)})(await ee(e)),te.saveToCache(a,t)}e.q?((e,t,a)=>{a.setWeatherData(e),a.setCoords(null),a.setCity(t)})(t,e.q,_):((e,t,a)=>{a.setWeatherData(e),a.setCoords(t)})(t,new y(e.lat,e.lon),_)}catch(a){((e,t)=>{t.setIsError(!0),t.setErrorMessage(e.message)})(a,_)}finally{_.setIsLoading(!1)}}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-main",{on:{"update-weather":e.onUpdateWeatherHandler}},[a("app-header",{scopedSlots:e._u([{key:"left",fn:function(){return[a("query-form")]},proxy:!0},{key:"right",fn:function(){return[a("language-changer")]},proxy:!0}])}),a("app-content",[a("wrapper",[!e.appState.weatherData||e.appState.isLoading||e.appState.isError?e.appState.isLoading?[a("div",{staticClass:"text-center"},[a("b-spinner",{attrs:{title:e.$t("messages.loading"),variant:"primary",label:e.$t("messages.loading")}})],1)]:e.appState.isError?[a("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" "+e._s(e.$t(e.appState.errorMessage))+" ")])]:e._e():[a("display",{attrs:{"weather-data":e.appState.weatherData,city:e.appState.city,coords:e.appState.coords}})]],2)],1)],1)}),[],!1,(function(e){for(let t in ae)this[t]=ae[t]}),null,null,null);se.options.__file="src/application/App.vue";var re=se.exports;f.use(g);const ne={en:{messages:{weatherForCity:"The weather for {city} is:",weatherForCoordinates:"The weather for a random coordinate (latitude: {lat}, longitude: {lon}) is:",feelsLike:"feels like",humidity:"Humidity",pressure:"Pressure",cityLabel:"City:",cityPlaceholder:"Type your city",submit:"Check the weather!",loading:"Loading...",error:"We couldn't get the weather data for that location"}},de:{messages:{weatherForCity:"Das Wetter für {city} ist:",weatherForCoordinates:"Das Wetter für eine zufällige Koordinate (Breite: {lat}, Längengrad: {lon}) ist:",feelsLike:"fühlt sich an wie",humidity:"Feuchtigkeit",pressure:"Luftdruck",cityLabel:"Stadt:",cityPlaceholder:"Geben Sie Ihre Stadt ein",submit:"Wetter anschauen!",loading:"Wird geladen...",error:"Wir konnten die Wetterdaten für diesen Ort nicht abrufen"}},hu:{messages:{weatherForCity:"Aktuális időjárás, {city}:",weatherForCoordinates:"Időjárás egy véletlenszerű ponton (szélesség: {lat}, hosszúság: {lon}):",feelsLike:"érzésre",humidity:"Páratartalom",pressure:"Nyomás",cityLabel:"Város:",cityPlaceholder:"Írj be egy várost",submit:"Lássuk az időjárást!",loading:"Betöltés...",error:"Sajnos erről a helyről nem tudjuk lekérni az időjárást"}},bg:{messages:{weatherForCity:"Времето за {city} е:",weatherForCoordinates:"Времето за произволна координата (географска ширина: {lat}, дължина: {lon}) е:",feelsLike:"се чувства като",humidity:"Влажност",pressure:"Налягане",cityLabel:"Град:",cityPlaceholder:"Въведете вашия град",submit:"Проверете времето!",loading:"Зареждане...",error:"Не можахме да получим метеорологичните данни за това местоположение"}}},oe=new g({locale:Q.EN,messages:ne});f.use((e=>{e.prototype.$bubble=function(e,...t){let a=this;do{a.$emit(e,...t),a=a.$parent}while(a)}})),new f({i18n:oe,render:e=>e(re)}).$mount("#app");
